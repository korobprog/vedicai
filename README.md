# Rag Agent

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π RAG (Retrieval-Augmented Generation) –∏ —á–∞—Ç-–∫–æ–º–Ω–∞—Ç.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫–æ–º–Ω–∞—Ç (Rooms)

–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ —á–∞—Ç-–∫–æ–º–Ω–∞—Ç —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ò–ò:

### 1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º
- **–ü—É–±–ª–∏—á–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã:** –î–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –≤—Ö–æ–¥–∞.
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã:** –í—Ö–æ–¥ —Ç–æ–ª—å–∫–æ –ø–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–º–Ω–∞—Ç—ã (`‚ãÆ`).

### 2. –ò–ò-–ü–æ–º–æ—â–Ω–∏–∫ (AI Assistant)
- –í –∫–∞–∂–¥–æ–π –∫–æ–º–Ω–∞—Ç–µ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫–∞.
- –ò–ò –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤ –¥–∏–∞–ª–æ–≥–µ.
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è –ò–ò –¥–æ—Å—Ç—É–ø–Ω–∞ –≤–ª–∞–¥–µ–ª—å—Ü—É –∏–ª–∏ –∞–¥–º–∏–Ω—É –∫–æ–º–Ω–∞—Ç—ã.

### 3. –°–∞–º–º–∞—Ä–∏ —á–∞—Ç–∞ (Chat Summary)
- –§—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–¥–≤–µ–¥–µ–Ω–∏—è –∏—Ç–æ–≥–æ–≤ –ø–µ—Ä–µ–ø–∏—Å–∫–∏.
- –ò–ò –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫—Ä–∞—Ç–∫–∏–π –æ—Ç—á–µ—Ç –æ —Ç–æ–º, —á—Ç–æ –æ–±—Å—É–∂–¥–∞–ª–æ—Å—å.
- –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç –±—ã—Å—Ç—Ä–æ –≤–æ–π—Ç–∏ –≤ –∫—É—Ä—Å –¥–µ–ª–∞ –≤ –∞–∫—Ç–∏–≤–Ω–æ–π –≥—Ä—É–ø–ø–µ.

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –ö–∞–∂–¥–∞—è –∫–æ–º–Ω–∞—Ç–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –∏ –∞–≤–∞—Ç–∞—Ä.
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–≥–ª–∞—à–∞—Ç—å –¥—Ä—É–∑–µ–π –ø—Ä—è–º–æ –∏–∑ —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+
- pnpm
- Android SDK / Android Studio
- Go 1.21+
- Docker (–¥–ª—è PostgreSQL)

### –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞

| –°–∫—Ä–∏–ø—Ç | –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|---------|----------|
| **dev:phone** | `pnpm run dev:phone` | üì± –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ (—Å–µ—Ä–≤–µ—Ä + Metro + –±–∏–ª–¥) |
| **phone:quick** | `pnpm run phone:quick` | ‚ö° –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ Metro (–µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç) |
| **dev:web** | `pnpm run dev:web` | üåê –ó–∞–ø—É—Å–∫ –¥–ª—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å–µ—Ä–≤–µ—Ä + –∞–¥–º–∏–Ω–∫–∞ + Metro) |
| **dev** | `pnpm run dev` | üñ•Ô∏è –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å —ç–º—É–ª—è—Ç–æ—Ä–æ–º Android |
| **server** | `pnpm run server` | üöÄ –¢–æ–ª—å–∫–æ backend —Å–µ—Ä–≤–µ—Ä |
| **admin** | `pnpm run admin` | üë®‚Äçüíº –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å |

### –ó–∞–ø—É—Å–∫ –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ (USB)

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω –ø–æ USB —Å –≤–∫–ª—é—á–µ–Ω–Ω–æ–π –æ—Ç–ª–∞–¥–∫–æ–π
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É:
```bash
pnpm run dev:phone
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ù–∞—Å—Ç—Ä–æ–∏—Ç `adb reverse` –¥–ª—è –ø–æ—Ä—Ç–æ–≤ 8081 (API) –∏ 8082 (Metro)
- –ó–∞–ø—É—Å—Ç–∏—Ç backend —Å–µ—Ä–≤–µ—Ä
- –ó–∞–ø—É—Å—Ç–∏—Ç Metro bundler
- –°–æ–±–µ—Ä–µ—Ç –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

### –ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ (–ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏)

–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:
```bash
pnpm run phone:quick
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Frontend:** React Native
- **Backend:** Go (Fiber, GORM)
- **Admin Panel:** Next.js
- **AI:** Google Gemini / OpenAI (—á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏)
- **Database:** PostgreSQL

## –î–µ–ø–ª–æ–π (Dokploy)

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (Backend)
–í Dokploy —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å –∏ —É–∫–∞–∂–∏—Ç–µ:
- **Build Path**: `/server`
- **Build Type**: `Dockerfile`
- **Port**: `8081` (—Ä–∞–∑–¥–µ–ª Domains)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω–∫–∏ (Admin Panel)
- **Build Path**: `/admin`
- **Build Type**: `Nixpacks` (–∏–ª–∏ Dockerfile, –µ—Å–ª–∏ –µ—Å—Ç—å)
- **Environment**: `NEXT_PUBLIC_APP_ENV=production` ‚Äî —ç—Ç–æ—Ç —Ñ–ª–∞–≥ —Å–∫—Ä—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ "–í—Ö–æ–¥" –∏ "–ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å" –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥–µ.

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

### Backend (–≤ Dokploy Environment)
–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `DB_HOST`, `DB_PORT`, `DB_USER`, `DB_PASSWORD`, `DB_NAME` ‚Äî –¥–∞–Ω–Ω—ã–µ PostgreSQL.
- `GEMINI_API_KEY` ‚Äî –∫–ª—é—á API.
- `GEMINI_BASE_URL` ‚Äî –ø—Ä–æ–∫—Å–∏-URL.
- `APP_ENV=production`.

### Frontend (React Native)
–§–∞–π–ª `frontend/.env` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±–æ—Ä–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–î–ª—è Production (—Ä–µ–ª–∏–∑ APK):**
```env
API_BASE_URL=https://api.vedamatch.ru
APP_ENV=production
```
*–≠—Ñ—Ñ–µ–∫—Ç: –ö–Ω–æ–ø–∫–∞ "Dev Login" –±—É–¥–µ—Ç —Å–∫—Ä—ã—Ç–∞, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–π–¥–µ—Ç –∫ –±–æ–µ–≤–æ–º—É —Å–µ—Ä–≤–µ—Ä—É.*

**–î–ª—è –õ–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
```env
API_BASE_URL=http://10.0.2.2:8081
APP_ENV=development
```
*–≠—Ñ—Ñ–µ–∫—Ç: –î–æ—Å—Ç—É–ø–µ–Ω –±—ã—Å—Ç—Ä—ã–π –≤—Ö–æ–¥ (Dev Login), –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É.*

> **–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.env` –≤ React Native —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`pnpm android`).
